<!DOCTYPE html>
<html>
<body>

<p>Click the button to send your coordinates to the Mobile Solar Panels Gateway.</p>

<button onclick="getLocation()">Send</button>

<p id="location"></p>

<script>
var x = document.getElementById("location");

function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(sendLocationData);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function sendLocationData(position) {
  x.innerHTML="Latitude: " + position.coords.latitude + "<br>Longitude: " + position.coords.longitude;

  var xhr = new XMLHttpRequest();
  xhr.open("POST", "http://edge_rasp:8080/api/v1/location", true);
  xhr.setRequestHeader('Content-Type', 'application/json');
  xhr.send(JSON.stringify({
      latitude: position.coords.latitude, longitude: position.coords.longitude
  }));
}
</script>

</body>
</html>
